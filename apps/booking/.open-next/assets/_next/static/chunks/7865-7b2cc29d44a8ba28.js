"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7865],{7865:function(e,s,t){t.d(s,{default:function(){return k}});var r=t(2303),n=t(3869);let a=(0,n.createContext)(void 0),l={selectedServices:[],selectedDate:null,selectedTime:null,customerDetails:null,totalPrice:0,bookingFee:0,remainingBalance:0,bookingId:null,confirmed:!1,currentStep:1};function i(e){let{children:s}=e,[t,i]=(0,n.useState)(l),o=e=>{let s=e.reduce((e,s)=>e+s.price,0),t=Math.max(.2*s,5e3);return{totalPrice:s,bookingFee:t,remainingBalance:s-t}},c=e=>{let s=o(e);i(t=>({...t,selectedServices:e,...s}))},d=()=>{switch(t.currentStep){case 1:return t.selectedServices.length>0;case 2:return!!t.selectedDate&&!!t.selectedTime;case 3:var e,s,r;return!!((null===(e=t.customerDetails)||void 0===e?void 0:e.name)&&(null===(s=t.customerDetails)||void 0===s?void 0:s.email)&&(null===(r=t.customerDetails)||void 0===r?void 0:r.phone));case 4:return!0;default:return!1}};return(0,r.jsx)(a.Provider,{value:{state:t,setSelectedServices:c,addService:e=>{c([...t.selectedServices,e])},removeService:e=>{c(t.selectedServices.filter(s=>s.id!==e))},setDateTime:(e,s)=>{i(t=>({...t,selectedDate:e,selectedTime:s}))},setCustomerDetails:e=>{i(s=>({...s,customerDetails:e}))},setBookingConfirmation:e=>{i(s=>({...s,bookingId:e,confirmed:!0}))},nextStep:()=>{d()&&i(e=>({...e,currentStep:Math.min(e.currentStep+1,5)}))},previousStep:()=>{i(e=>({...e,currentStep:Math.max(e.currentStep-1,1)}))},goToStep:e=>{e>=1&&e<=5&&i(s=>({...s,currentStep:e}))},resetWizard:()=>{i(l)},canProceedToNextStep:d},children:s})}function o(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useBooking must be used within a BookingProvider");return e}function c(e){return"R".concat((e/100).toFixed(2))}function d(e){let s=Math.floor(e/60),t=e%60;return 0===s?"".concat(t,"min"):0===t?"".concat(s,"h"):"".concat(s,"h ").concat(t,"min")}var m=t(1634),x=t(1562);function h(){let{state:e,addService:s,removeService:t}=o(),[a,l]=(0,n.useState)([]),[i,h]=(0,n.useState)(!0),[u,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{!async function(){try{h(!0);let e=x.env.NEXT_PUBLIC_TENANT_ID||"ccb12b4d-ade6-467d-a614-7c9d198ddc70",s=await fetch("/api/public/services?tenantId=".concat(e));if(!s.ok)throw Error("Failed to fetch services");let t=await s.json();l(t.services||[])}catch(e){b(e instanceof Error?e.message:"Failed to load services")}finally{h(!1)}}()},[]);let g=s=>e.selectedServices.some(e=>e.id===s),p=e=>{g(e.id)?t(e.id):s(e)},j={"Middle & Side Installation":"/images/services/middle-side.jpg","Maphondo & Lines Installation":"/images/services/maphondo.jpg","Soft Glam Makeup":"/images/services/makeup.jpg","Gel Maphondo Styling":"/images/services/gel-maphondo.jpg","Frontal Ponytail Installation":"/images/services/ponytail.jpg"};return i?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-crimson"})}):u?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,r.jsx)("p",{className:"text-red-600 font-semibold",children:"Error loading services"}),(0,r.jsx)("p",{className:"text-red-500 text-sm mt-2",children:u}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Retry"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Your Services"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Choose one or more services for your appointment"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:a.map(e=>{let s=g(e.id);return(0,r.jsxs)("div",{onClick:()=>p(e),className:"\n                relative border-2 rounded-lg p-4 cursor-pointer transition-all\n                ".concat(s?"border-crimson bg-crimson bg-opacity-5":"border-gray-200 hover:border-crimson hover:shadow-md","\n              "),children:[s&&(0,r.jsx)("div",{className:"absolute top-4 right-4 w-6 h-6 bg-crimson rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),j[e.name]&&(0,r.jsx)("div",{className:"mb-3 h-32 bg-gray-100 rounded-lg overflow-hidden",children:(0,r.jsx)(m.default,{src:j[e.name],alt:e.name,width:400,height:128,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})}),(0,r.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-2",children:e.name}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-crimson font-bold text-lg",children:c(e.price)}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:d(e.durationMinutes)})]})]},e.id)})}),e.selectedServices.length>0&&(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-800 mb-4",children:"Your Selection"}),(0,r.jsx)("div",{className:"space-y-2 mb-4",children:e.selectedServices.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{className:"text-gray-700",children:e.name}),(0,r.jsx)("span",{className:"text-gray-600",children:c(e.price)})]},e.id))}),(0,r.jsxs)("div",{className:"border-t border-gray-300 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-800",children:"Total Duration:"}),(0,r.jsx)("span",{className:"text-gray-700",children:d(e.selectedServices.reduce((e,s)=>e+s.durationMinutes,0))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-800",children:"Total Price:"}),(0,r.jsx)("span",{className:"text-crimson font-bold text-xl",children:c(e.totalPrice)})]})]})]}),0===e.selectedServices.length&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:(0,r.jsx)("p",{className:"text-blue-600",children:"Please select at least one service to continue"})})]})}var u=t(1562);let b={monday:{start:"09:00",end:"17:00"},tuesday:{start:"09:00",end:"17:00"},wednesday:{start:"09:00",end:"17:00"},thursday:{start:"09:00",end:"17:00"},friday:{start:"09:00",end:"17:00"},saturday:{start:"08:00",end:"16:00"},sunday:{start:null,end:null}};function g(){let{state:e,setDateTime:s}=o(),[t,a]=(0,n.useState)(e.selectedDate||""),[l,i]=(0,n.useState)(e.selectedTime||""),[c,m]=(0,n.useState)([]),[x,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)(null),j=e=>{let s=new Date(e);if(0===s.getDay())return!1;let t=new Date;return t.setHours(0,0,0,0),!(s<t)},f=(0,n.useCallback)(e=>{let s=b[["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date(e).getDay()]];if(!s.start||!s.end)return[];let t=[],[r,n]=s.start.split(":").map(Number),[a,l]=s.end.split(":").map(Number),i=r,o=n;for(;i<a||i===a&&o<l;){let e="".concat(String(i).padStart(2,"0"),":").concat(String(o).padStart(2,"0"));t.push({time:e,available:!0}),(o+=30)>=60&&(o=0,i+=1)}return t},[]);(0,n.useEffect)(()=>{if(!t){m([]);return}if(!j(t)){p("Selected date is not available. We are closed on Sundays."),m([]);return}!async function(){try{var s;h(!0),p(null);let r=u.env.NEXT_PUBLIC_TENANT_ID||"ccb12b4d-ade6-467d-a614-7c9d198ddc70",n=null===(s=e.selectedServices[0])||void 0===s?void 0:s.id;if(!n){m(f(t));return}let a=u.env.NEXT_PUBLIC_API_URL||"http://localhost:8787",l=new Date(t).toISOString().split("T")[0],i=await fetch("".concat(a,"/api/tenant/").concat(r,"/availability?date=").concat(l,"&serviceId=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw Error("Availability API error: ".concat(i.status));let o=await i.json();if(o.slots&&Array.isArray(o.slots)){let e=o.slots.map(e=>({time:new Date(e.start).toLocaleTimeString("en-ZA",{hour:"2-digit",minute:"2-digit",hour12:!1}),available:!0,reason:void 0}));m(e)}else m(f(t))}catch(e){m(f(t))}finally{h(!1)}}()},[t,e.selectedServices,f]);let y=e=>{i(e),s(t,e)},v=e=>new Date(e).toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Choose Date & Time"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Select your preferred appointment date and time"}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"text-sm text-blue-800 font-semibold mb-2",children:"Selected Services:"}),(0,r.jsx)("div",{className:"space-y-1",children:e.selectedServices.map(e=>(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["• ",e.name," (",d(e.durationMinutes),")"]},e.id))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Date"}),(0,r.jsx)("input",{type:"date",id:"date",value:t,onChange:e=>{a(e.target.value),i("")},min:new Date().toISOString().split("T")[0],max:(()=>{let e=new Date;return e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]})(),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-crimson focus:border-crimson"}),t&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:v(t)})]}),g&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:g})}),t&&!g&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Time"}),x?(0,r.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-crimson"})}):0===c.length?(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-yellow-700 text-sm",children:"No available time slots for this date. Please select another date."})}):(0,r.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:c.map(e=>(0,r.jsx)("button",{onClick:()=>e.available&&y(e.time),disabled:!e.available,className:"\n                    px-4 py-3 rounded-lg font-medium text-sm transition-all\n                    ".concat(l===e.time?"bg-crimson text-white ring-2 ring-crimson ring-offset-2":e.available?"bg-white border-2 border-gray-200 text-gray-700 hover:border-crimson hover:bg-crimson hover:bg-opacity-10":"bg-gray-100 text-gray-400 cursor-not-allowed","\n                  "),title:e.available?void 0:e.reason,children:e.time},e.time))})]}),t&&l&&(0,r.jsxs)("div",{className:"mt-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-green-800 font-semibold mb-1",children:"✓ Appointment Time Selected"}),(0,r.jsxs)("p",{className:"text-green-700 text-sm",children:[v(t)," at ",l]})]}),(0,r.jsxs)("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Business Hours:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600",children:[(0,r.jsx)("div",{children:"Monday - Friday: 09:00 - 17:00"}),(0,r.jsx)("div",{children:"Saturday: 08:00 - 16:00"}),(0,r.jsx)("div",{className:"col-span-2 text-red-600",children:"Sunday: Closed"})]})]})]})}function p(){var e,s,t,a,l;let{state:i,setCustomerDetails:c}=o(),[d,m]=(0,n.useState)({name:(null===(e=i.customerDetails)||void 0===e?void 0:e.name)||"",email:(null===(s=i.customerDetails)||void 0===s?void 0:s.email)||"",phone:(null===(t=i.customerDetails)||void 0===t?void 0:t.phone)||"",notes:(null===(a=i.customerDetails)||void 0===a?void 0:a.notes)||""}),[x,h]=(0,n.useState)({}),[u,b]=(0,n.useState)({}),g=(e,s)=>{switch(e){case"name":if(!s.trim())return"Name is required";if(s.trim().length<2)return"Name must be at least 2 characters";return;case"email":if(!s.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return"Please enter a valid email address";return;case"phone":if(!s.trim())return"Phone number is required";let t=s.replace(/\s/g,"");if(!/^(\+27|0)[6-8][0-9]{8}$/.test(t))return"Please enter a valid South African phone number (e.g., 0821234567)";return;case"notes":if(s.length>500)return"Notes must be less than 500 characters";return;default:return}},p=(0,n.useCallback)(()=>{let e={};return Object.keys(d).forEach(s=>{let t=g(s,d[s]||"");t&&(e[s]=t)}),h(e),0===Object.keys(e).length},[d]),j=e=>{let{name:s,value:t}=e.target;if(m(e=>({...e,[s]:t})),u[s]){let e=g(s,t);h(t=>({...t,[s]:e}))}},f=e=>{let{name:s,value:t}=e.target;b(e=>({...e,[s]:!0}));let r=g(s,t);h(e=>({...e,[s]:r}))};return(0,n.useEffect)(()=>{p()&&c(d)},[d,c,p]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Your Details"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Please provide your contact information for the appointment"}),(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>e.preventDefault(),children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:j,onBlur:f,placeholder:"e.g., Jane Doe",className:"\n              w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-crimson focus:border-crimson\n              ".concat(x.name&&u.name?"border-red-500":"border-gray-300","\n            "),"aria-invalid":x.name&&u.name?"true":"false","aria-describedby":x.name&&u.name?"name-error":void 0}),x.name&&u.name&&(0,r.jsx)("p",{id:"name-error",className:"mt-1 text-sm text-red-600",children:x.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:d.email,onChange:j,onBlur:f,placeholder:"e.g., jane@example.com",className:"\n              w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-crimson focus:border-crimson\n              ".concat(x.email&&u.email?"border-red-500":"border-gray-300","\n            "),"aria-invalid":x.email&&u.email?"true":"false","aria-describedby":x.email&&u.email?"email-error":void 0}),x.email&&u.email&&(0,r.jsx)("p",{id:"email-error",className:"mt-1 text-sm text-red-600",children:x.email}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"We'll send your booking confirmation to this email"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone Number (WhatsApp) ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:j,onBlur:f,placeholder:"e.g., 0821234567",className:"\n              w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-crimson focus:border-crimson\n              ".concat(x.phone&&u.phone?"border-red-500":"border-gray-300","\n            "),"aria-invalid":x.phone&&u.phone?"true":"false","aria-describedby":x.phone&&u.phone?"phone-error":void 0}),x.phone&&u.phone&&(0,r.jsx)("p",{id:"phone-error",className:"mt-1 text-sm text-red-600",children:x.phone}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"We'll send appointment reminders via WhatsApp"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"notes",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Additional Notes ",(0,r.jsx)("span",{className:"text-gray-400 text-xs",children:"(Optional)"})]}),(0,r.jsx)("textarea",{id:"notes",name:"notes",value:d.notes,onChange:j,onBlur:f,rows:4,placeholder:"Any special requests or information we should know...",className:"\n              w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-crimson focus:border-crimson resize-none\n              ".concat(x.notes&&u.notes?"border-red-500":"border-gray-300","\n            "),"aria-invalid":x.notes&&u.notes?"true":"false","aria-describedby":x.notes&&u.notes?"notes-error":void 0}),x.notes&&u.notes&&(0,r.jsx)("p",{id:"notes-error",className:"mt-1 text-sm text-red-600",children:x.notes}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[(null===(l=d.notes)||void 0===l?void 0:l.length)||0,"/500 characters"]})]}),Object.keys(x).length>0&&Object.keys(u).length>0&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-red-600 text-sm font-semibold mb-2",children:"Please fix the following errors:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-red-600 text-sm space-y-1",children:Object.entries(x).map(e=>{let[s,t]=e;return(0,r.jsx)("li",{children:t},s)})})]}),0===Object.keys(x).length&&d.name&&d.email&&d.phone&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-green-800 font-semibold",children:"✓ All details look good! You can proceed to the next step."})})]}),(0,r.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,r.jsx)("strong",{children:"Privacy Notice:"})," Your information is protected under POPIA (Protection of Personal Information Act). We will only use your details to manage your appointment and send you booking confirmations. You can request access to or deletion of your data at any time."]})})]})}var j=t(1562);function f(){var e,s,t,a;let{state:l,setBookingConfirmation:i,nextStep:m}=o(),[x,h]=(0,n.useState)(!1),[u,b]=(0,n.useState)(null),g=async()=>{try{h(!0),b(null);let s={tenantId:j.env.NEXT_PUBLIC_TENANT_ID||"ccb12b4d-ade6-467d-a614-7c9d198ddc70",serviceId:l.selectedServices[0].id,customer:{name:l.customerDetails.name,email:l.customerDetails.email,phone:l.customerDetails.phone},scheduledTime:"".concat(l.selectedDate,"T").concat(l.selectedTime,":00Z"),notes:l.customerDetails.notes||""},t=await fetch("/api/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok){var e;let s=await t.json();throw Error((null===(e=s.error)||void 0===e?void 0:e.message)||"Failed to create booking")}let r=await t.json();i(r.booking.id),m()}catch(e){b(e instanceof Error?e.message:"Failed to create booking. Please try again.")}finally{h(!1)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Booking Summary"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Please review your booking details before confirming"}),(0,r.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Services"}),(0,r.jsx)("div",{className:"space-y-3",children:l.selectedServices.map(e=>(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-800",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:d(e.durationMinutes)})]}),(0,r.jsx)("p",{className:"font-semibold text-gray-800",children:c(e.price)})]},e.id))})]}),(0,r.jsxs)("div",{className:"mb-6 pb-6 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Appointment"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 text-crimson",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("span",{children:new Date(l.selectedDate).toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{className:"flex items-center text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 text-crimson",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:l.selectedTime})]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Your Details"}),(0,r.jsxs)("div",{className:"space-y-2 text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Name:"})," ",null===(e=l.customerDetails)||void 0===e?void 0:e.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",null===(s=l.customerDetails)||void 0===s?void 0:s.email]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Phone:"})," ",null===(t=l.customerDetails)||void 0===t?void 0:t.phone]}),(null===(a=l.customerDetails)||void 0===a?void 0:a.notes)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Notes:"})," ",l.customerDetails.notes]})]})]})]}),(0,r.jsxs)("div",{className:"bg-crimson bg-opacity-5 border-2 border-crimson rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Payment Details"}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-gray-700",children:[(0,r.jsx)("span",{children:"Total Service Price:"}),(0,r.jsx)("span",{className:"font-semibold",children:c(l.totalPrice)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-crimson",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Booking Fee (20%):"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:c(l.bookingFee)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-gray-700",children:[(0,r.jsx)("span",{children:"Remaining Balance:"}),(0,r.jsx)("span",{className:"font-semibold",children:c(l.remainingBalance)})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-crimson",children:[(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"How Payment Works:"})}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[(0,r.jsxs)("li",{children:["Pay ",(0,r.jsx)("strong",{className:"text-crimson",children:c(l.bookingFee)})," booking fee now to secure your appointment"]}),(0,r.jsxs)("li",{children:["Pay remaining ",(0,r.jsx)("strong",{children:c(l.remainingBalance)})," at the salon"]}),(0,r.jsx)("li",{children:"Booking fee is non-refundable but can be rescheduled"})]})]})]}),u&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"text-red-600 font-semibold",children:"Error"}),(0,r.jsx)("p",{className:"text-red-600 text-sm mt-1",children:u})]}),(0,r.jsx)("button",{onClick:g,disabled:x,className:"\n          w-full py-4 rounded-lg font-bold text-lg transition-all\n          ".concat(x?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-crimson text-white hover:bg-crimson-dark shadow-lg hover:shadow-xl","\n        "),children:x?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Confirm Booking & Pay ".concat(c(l.bookingFee))}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-4",children:["By confirming, you agree to our"," ",(0,r.jsx)("a",{href:"/terms",className:"text-crimson hover:underline",children:"Terms of Service"})," ","and"," ",(0,r.jsx)("a",{href:"/privacy",className:"text-crimson hover:underline",children:"Privacy Policy"})]})]})}function y(){var e,s;let{state:t,resetWizard:n}=o(),a=e=>new Date(e).toLocaleDateString("en-ZA",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),l="+27699171527",i=encodeURIComponent("Hi! I've just booked an appointment for ".concat(a(t.selectedDate)," at ").concat(t.selectedTime,". Booking ID: ").concat(t.bookingId)),m="https://wa.me/".concat(l,"?text=").concat(i);return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("div",{className:"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Booking Confirmed! \uD83C\uDF89"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Your appointment has been successfully booked"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6 inline-block",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Booking Reference"}),(0,r.jsx)("p",{className:"text-2xl font-mono font-bold text-crimson",children:null===(e=t.bookingId)||void 0===e?void 0:e.slice(0,8).toUpperCase()})]}),(0,r.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 mb-6 text-left",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:"Appointment Details"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Services"}),t.selectedServices.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-gray-700",children:e.name}),(0,r.jsx)("span",{className:"text-gray-600 text-sm",children:d(e.durationMinutes)})]},e.id))]}),(0,r.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"When"}),(0,r.jsx)("p",{className:"text-gray-800 font-semibold",children:a(t.selectedDate)}),(0,r.jsx)("p",{className:"text-gray-600",children:t.selectedTime})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Payment"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Booking Fee Paid:"}),(0,r.jsx)("span",{className:"font-semibold text-green-600",children:c(t.bookingFee)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Pay at Salon:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-800",children:c(t.remainingBalance)})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-green-800 mb-3",children:"Get Instant Confirmation"}),(0,r.jsx)("p",{className:"text-green-700 text-sm mb-4",children:"Click below to confirm your booking via WhatsApp and receive appointment reminders"}),(0,r.jsxs)("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-all shadow-lg hover:shadow-xl",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"Confirm on WhatsApp"]})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("p",{className:"text-blue-800 text-sm",children:["\uD83D\uDCE7 A confirmation email has been sent to ",(0,r.jsx)("strong",{children:null===(s=t.customerDetails)||void 0===s?void 0:s.email})]})}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6 mb-6 text-left",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"What Happens Next?"}),(0,r.jsxs)("ol",{className:"space-y-3 text-sm text-gray-700",children:[(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-crimson text-white rounded-full flex items-center justify-center text-xs font-bold mr-3",children:"1"}),(0,r.jsx)("span",{children:"You'll receive a confirmation message on WhatsApp"})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-crimson text-white rounded-full flex items-center justify-center text-xs font-bold mr-3",children:"2"}),(0,r.jsx)("span",{children:"We'll send you a reminder 24 hours before your appointment"})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-crimson text-white rounded-full flex items-center justify-center text-xs font-bold mr-3",children:"3"}),(0,r.jsx)("span",{children:"Arrive 5-10 minutes early and pay the remaining balance at the salon"})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("button",{onClick:()=>window.print(),className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-all",children:"Print Confirmation"}),(0,r.jsx)("button",{onClick:n,className:"flex-1 px-6 py-3 bg-crimson text-white rounded-lg font-semibold hover:bg-crimson-dark transition-all",children:"Book Another Appointment"})]}),(0,r.jsxs)("div",{className:"mt-8 text-sm text-gray-600",children:[(0,r.jsx)("p",{children:"Need to reschedule or have questions?"}),(0,r.jsxs)("p",{className:"mt-1",children:["Contact us on WhatsApp:"," ",(0,r.jsx)("a",{href:"https://wa.me/".concat(l),className:"text-crimson hover:underline font-semibold",children:"+27 69 917 1527"})]})]})]})}function v(){let{state:e}=o(),s=[{number:1,label:"Services"},{number:2,label:"Date & Time"},{number:3,label:"Details"},{number:4,label:"Payment"},{number:5,label:"Confirm"}];return(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:s.map((t,a)=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"\n                  w-10 h-10 rounded-full flex items-center justify-center font-semibold\n                  transition-all duration-300\n                  ".concat(e.currentStep===t.number?"bg-crimson text-white scale-110":e.currentStep>t.number?"bg-green-500 text-white":"bg-gray-200 text-gray-500","\n                "),children:e.currentStep>t.number?(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):t.number}),(0,r.jsx)("span",{className:"text-xs mt-2 text-gray-600",children:t.label})]}),a<s.length-1&&(0,r.jsx)("div",{className:"\n                  flex-1 h-1 mx-2 transition-all duration-300\n                  ".concat(e.currentStep>t.number?"bg-green-500":"bg-gray-200","\n                ")})]},t.number))})})}function N(){let{state:e,nextStep:s,previousStep:t,canProceedToNextStep:n}=o();return(0,r.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,r.jsx)("button",{onClick:t,disabled:1===e.currentStep,className:"\n          px-6 py-3 rounded-lg font-semibold transition-all\n          ".concat(1===e.currentStep?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-700 hover:bg-gray-300","\n        "),children:"← Back"}),e.currentStep<5&&(0,r.jsx)("button",{onClick:s,disabled:!n(),className:"\n            px-6 py-3 rounded-lg font-semibold transition-all\n            ".concat(n()?"bg-crimson text-white hover:bg-crimson-dark":"bg-gray-200 text-gray-400 cursor-not-allowed","\n          "),children:"Next →"})]})}function w(){let{state:e}=o();return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,r.jsx)(v,{}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 min-h-[500px]",children:[1===e.currentStep&&(0,r.jsx)(h,{}),2===e.currentStep&&(0,r.jsx)(g,{}),3===e.currentStep&&(0,r.jsx)(p,{}),4===e.currentStep&&(0,r.jsx)(f,{}),5===e.currentStep&&(0,r.jsx)(y,{})]}),e.currentStep<5&&(0,r.jsx)(N,{})]})}function k(){return(0,r.jsx)(i,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsx)(w,{})})})}}}]);